<mat-dialog-content class="p-0 h-full overflow-auto bg-white dark:bg-[#1C2736]">
  <div class="text-[#101828] dark:text-white text-[18px] font-medium">
    {{ (data ? 'edit.user.data' : 'add.new.member')| translate }}
  </div>

  <div class="flex flex-col gap-6 pt-6">
    <div>
      <div class="w-[80px] aspect-square relative bg-transparent shrink-0">
        @if (profileForm.get('file_id').value) {
          <img class="object-cover rounded-full dark:border dark:border-[#A2A8B2]"
               [ngSrc]="fileHost + 'download/' + profileForm.get('file_id').value + '/content'"
               [fill]="true" [alt]="">
        } @else {
          <img class="object-cover rounded-full dark:border dark:border-[#A2A8B2]" [ngSrc]="'assets/img/anonym.png'"
               [fill]="true" [alt]="">
        }

        <label
          class="shadow dark:border dark:border-[#A2A8B2] absolute w-8 aspect-square rounded-full grid place-content-center bottom-0 right-0 bg-[#F4EBFF] dark:bg-[#4D5669] cursor-pointer"
          mat-ripple>
          <mat-icon class="text-[#6941C6] dark:text-[#A2A8B2] icon-size-16" [svgIcon]="'icon:pencil'"/>

          <input
            class="hidden"
            type="file"
            accept="png,jpg,jpeg"
            (change)="chooseFile(attachFile.files)"
            #attachFile>
        </label>
      </div>
    </div>

    <form class="grow grid grid-cols-2 gap-[14px]" [formGroup]="profileForm" (ngSubmit)="saveChanges()">
      <label class="col-span-1">
          <span
            class="block text-[13px] text-[#98A2B3] dark:text-[#e4e7ec] font-medium mb-1">{{ 'surname'| translate }}</span>
        <input
          class="w-full h-10 px-3 bg-[#F2F4F7] dark:bg-[#4D5669] rounded-[8px] text-[#101828] dark:text-white text-[14px] font-medium cursor-pointer"
          type="text"
          [formControlName]="'last_name'"
        >
        @if (profileForm.get('last_name').touched && profileForm.get('last_name').errors) {
          <span class="text-[#F97066] text-[13px]">{{ 'required.field'| translate }}</span>
        }
      </label>
      <label class="col-span-1">
          <span
            class="block text-[13px] text-[#98A2B3] dark:text-[#e4e7ec] font-medium mb-1">{{ 'name'| translate }}</span>
        <input
          class="w-full h-10 px-3 bg-[#F2F4F7] dark:bg-[#4D5669] rounded-[8px] text-[#101828] dark:text-white text-[14px] font-medium cursor-pointer"
          type="text"
          [formControlName]="'first_name'"
        >
        @if (profileForm.get('first_name').touched && profileForm.get('first_name').errors) {
          <span class="text-[#F97066] text-[13px]">{{ 'required.field'| translate }}</span>
        }
      </label>
      <label class="col-span-1">
          <span
            class="block text-[13px] text-[#98A2B3] dark:text-[#e4e7ec] font-medium mb-1">{{ 'middlename'| translate }}</span>
        <input
          class="w-full h-10 px-3 bg-[#F2F4F7] dark:bg-[#4D5669] rounded-[8px] text-[#101828] dark:text-white text-[14px] font-medium cursor-pointer"
          type="text"
          [formControlName]="'middle_name'"
        >
        @if (profileForm.get('middle_name').touched && profileForm.get('middle_name').errors) {
          <span class="text-[#F97066] text-[13px]">{{ 'required.field'| translate }}</span>
        }
      </label>
      <label class="col-span-1">
          <span
            class="block text-[13px] text-[#98A2B3] dark:text-[#e4e7ec] font-medium mb-1">{{ 'gender'| translate }}</span>
        <div
          class="w-full flex h-10 py-0.5 bg-[#F2F4F7] dark:bg-[#4D5669] rounded-[8px] text-[#101828] dark:text-white font-medium cursor-pointer"
        >
          <mat-select
            class="flex-grow"
            [formControlName]="'gender'"
          >
            <mat-option [value]="'male'">{{ 'male'| translate }}</mat-option>
            <mat-option [value]="'female'">{{ 'female'| translate }}</mat-option>
          </mat-select>
        </div>
        @if (profileForm.get('gender').touched && profileForm.get('gender').errors) {
          <span class="text-[#F97066] text-[13px]">{{ 'required.field'| translate }}</span>
        }
      </label>
      <label class="col-span-1">
          <span
            class="block text-[13px] text-[#98A2B3] dark:text-[#e4e7ec] font-medium mb-1">{{ 'date.of.birth'| translate }}</span>
        <div
          class="w-full inline-flex items-center gap-2 h-10 px-3 bg-[#F2F4F7] dark:bg-[#4D5669] rounded-[8px] text-[#101828] dark:text-white text-[12px] font-medium cursor-pointer"
          mat-ripple
          (click)="dueDatePicker.open()"
        >
          <mat-icon class="icon-size-18" [svgIcon]="'icon:calendar'"/>
          <span class="line-clamp-1 text-[14px]">{{ profileForm.get('birthday').value| date: 'dd.MM.YYYY' }}</span>

        </div>
        <input class="w-full h-0 cdk-visually-hidden" [matDatepicker]="dueDatePicker" [formControlName]="'birthday'">
        <mat-datepicker #dueDatePicker></mat-datepicker>
      </label>
      <label class="col-span-1">
          <span
            class="block text-[13px] text-[#98A2B3] dark:text-[#e4e7ec] font-medium mb-1">{{ 'phone.number'| translate }}</span>
        <input
          class="w-full h-10 px-3 bg-[#F2F4F7] dark:bg-[#4D5669] rounded-[8px] text-[#101828] dark:text-white text-[14px] font-medium cursor-pointer"
          mask="00 000 00 00"
          prefix="+998 "
          type="text"
          [formControlName]="'phone'"
        >
        @if (profileForm.get('phone').touched && profileForm.get('phone').errors) {
          <span class="text-[#F97066] text-[13px]">{{ 'required.field'| translate }}</span>
        }
      </label>

      <label class="col-span-1">
          <span
            class="block text-[13px] text-[#98A2B3] dark:text-[#e4e7ec] font-medium mb-1">{{ 'passport.number'| translate }}</span>
        <input
          class="w-full h-10 px-3 bg-[#F2F4F7] dark:bg-[#4D5669] rounded-[8px] text-[#101828] dark:text-white text-[14px] uppercase font-medium cursor-pointer"
          mask="AA0000000"
          type="text"
          [formControlName]="'passport_number'"
        >
        @if (profileForm.get('passport_number').touched && profileForm.get('passport_number').errors) {
          <span class="text-[#F97066] text-[13px]">{{ 'required.field'| translate }}</span>
        }
      </label>

      <label class="col-span-1">
          <span
            class="block text-[13px] text-[#98A2B3] dark:text-[#e4e7ec] font-medium mb-1">{{ 'pin'| translate }}</span>
        <input
          class="w-full h-10 px-3 bg-[#F2F4F7] dark:bg-[#4D5669] rounded-[8px] text-[#101828] dark:text-white text-[14px] font-medium cursor-pointer"
          mask="00000000000000"
          type="text"
          [formControlName]="'pinpp'"
        >
        @if (profileForm.get('pinpp').touched && profileForm.get('pinpp').errors) {
          <span class="text-[#F97066] text-[13px]">{{ 'required.field'| translate }}</span>
        }
      </label>

      <label class="col-span-1">
          <span
            class="block text-[13px] text-[#98A2B3] dark:text-[#e4e7ec] font-medium mb-1">{{ 'department'| translate }}</span>
        <div
          class="w-full flex h-10 py-0.5 bg-[#F2F4F7] dark:bg-[#4D5669] rounded-[8px] text-[#101828] dark:text-white font-medium cursor-pointer"
        >
          <mat-select
            class="flex-grow"
            [formControlName]="'department_id'"
          >
            @for (department of departmentsList; track department) {
              <mat-option [value]="department.id">{{ department?.department_name }}</mat-option>
            }
          </mat-select>
        </div>
        @if (profileForm.get('department_id').touched && profileForm.get('department_id').errors) {
          <span class="text-[#F97066] text-[13px]">{{ 'required.field'| translate }}</span>
        }
      </label>

      <label class="col-span-1">
          <span
            class="block text-[13px] text-[#98A2B3] dark:text-[#e4e7ec] font-medium mb-1">{{ 'position'| translate }}</span>
        <div
          class="w-full flex h-10 py-0.5 bg-[#F2F4F7] dark:bg-[#4D5669] rounded-[8px] text-[#101828] dark:text-white font-medium cursor-pointer"
        >
          <mat-select
            class="flex-grow"
            [formControlName]="'position_id'"
          >
            @for (position of positionsList; track position) {
              <mat-option [value]="position.id">{{ position?.position_name }}</mat-option>
            }
          </mat-select>
        </div>
        @if (profileForm.get('position_id').touched && profileForm.get('position_id').errors) {
          <span class="text-[#F97066] text-[13px]">{{ 'required.field'| translate }}</span>
        }
      </label>

      <div class="col-span-2 flex justify-end gap-[14px]">
        <button
          class="h-[42px] rounded-[8px] text-white font-medium px-5 bg-[#9E77ED] disabled:bg-gray-500"
          mat-ripple
          [disabled]="profileForm.invalid"
        >
          @if (profileForm.disabled) {
            <mat-spinner [diameter]="24"/>
          } @else {
            {{ 'save'| translate }}
          }
        </button>
      </div>
    </form>
  </div>
</mat-dialog-content>
