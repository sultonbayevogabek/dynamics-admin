<!-- news.component.html -->
<div
  class="bg-card flex min-w-0 flex-auto flex-col dark:bg-transparent sm:absolute sm:inset-0 sm:overflow-hidden"
>
  <!-- Header -->
  <div
    class="flex flex-col px-6 py-8 gap-4"
  >
    <div class="flex items-center justify-between">
      <div class="text-4xl font-extrabold tracking-tight">Yangiliklar</div>

      <div class="flex gap-3">
        <button
          mat-flat-button
          [color]="'primary'"
          (click)="openAddDialog()"
        >
          <mat-icon [svgIcon]="'heroicons_outline:plus'"></mat-icon>
          <span class="ml-2 mr-1">Yangi yangilik</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Main -->
  <div class="flex flex-auto overflow-hidden">
    <!-- News list -->
    <div
      class="flex flex-auto flex-col overflow-hidden sm:mb-18 sm:overflow-y-auto"
    >
      @if (items.length > 0) {
        <table class="w-full border-collapse border border-gray-300">
          <!-- Header -->
          <thead
            class="bg-gray-50 text-secondary sticky top-0 z-10 text-md font-semibold shadow dark:bg-black dark:bg-opacity-5">
          <tr>
            <th class="px-2 py-4 border" style="width: 50px;">â„–</th>
            <th class="px-6 py-4 border">Sarlavha</th>
            <th class="px-6 py-4 border">Qisqacha mazmun</th>
            <th class="px-6 py-4 border" style="width: 180px;">Sana</th>
            <th class="px-6 py-4 border" style="width: 150px;">Harakatlar</th>
          </tr>
          </thead>
          <tbody>
            @for (item of paginatedItems; track item._id; let i = $index) {
              <tr class="hover:bg-slate-50 bg-white">
                <!-- Index -->
                <td class="border px-2 py-3 text-center bg-slate-50">
                  {{ calculateIndex(i) }}
                </td>

                <!-- Title -->
                <td class="border px-6 py-3 cursor-pointer" (click)="openDetails(item)">
                  {{ item.titleUz }}
                </td>

                <!-- Short Description -->
                <td class="border px-6 py-3 cursor-pointer" (click)="openDetails(item)">
                  <div class="line-clamp-2">{{ item.shortDescriptionUz }}</div>
                </td>

                <!-- Date -->
                <td class="border px-6 py-3 text-center">
                  {{ item.createdAt | date:'dd.MM.yyyy' }}
                </td>

                <!-- Actions -->
                <td class="border px-6 py-3">
                  <div class="flex gap-2 justify-center">
                    <button class="h-7 min-h-7 min-w-10 px-2 leading-6" mat-stroked-button color="primary"
                            (click)="$event.stopPropagation(); openDetails(item)">
                      <mat-icon class="icon-size-4" svgIcon="heroicons_outline:pencil"></mat-icon>
                    </button>
                    <button class="h-7 min-h-7 min-w-10 px-2 leading-6" mat-stroked-button color="warn"
                            (click)="$event.stopPropagation(); deleteItem(item._id)">
                      <mat-icon class="icon-size-4" svgIcon="heroicons_outline:trash"></mat-icon>
                    </button>
                  </div>
                </td>
              </tr>
            }
          </tbody>
        </table>

        <!-- Pagination -->
          <!--        <div class="flex justify-center mt-4 mb-6">-->
          <!--          <div class="flex items-center gap-2">-->
          <!--            <button-->
          <!--              mat-icon-button-->
          <!--              (click)="prevPage()"-->
          <!--              [disabled]="currentPage === 1"-->
          <!--              class="text-gray-600"-->
          <!--            >-->
          <!--              <mat-icon svgIcon="heroicons_outline:chevron-left"></mat-icon>-->
          <!--            </button>-->
          <!--            -->
          <!--            @for (page of pageNumbers; track page) {-->
          <!--              <button-->
          <!--                mat-mini-fab-->
          <!--                [color]="currentPage === page ? 'primary' : ''"-->
          <!--                (click)="goToPage(page)"-->
          <!--                class="h-8 w-8 min-h-8"-->
          <!--              >-->
          <!--                {{ page }}-->
          <!--              </button>-->
          <!--            }-->
          <!--            -->
          <!--            <button-->
          <!--              mat-icon-button-->
          <!--              (click)="nextPage()"-->
          <!--              [disabled]="currentPage === totalPages"-->
          <!--              class="text-gray-600"-->
          <!--            >-->
          <!--              <mat-icon svgIcon="heroicons_outline:chevron-right"></mat-icon>-->
          <!--            </button>-->
          <!--          </div>-->
          <!--        </div>-->
      } @else {
        <div class="flex flex-col items-center justify-center p-8">
          <div class="text-2xl font-semibold mb-4">Yangiliklar topilmadi</div>
          <div class="text-secondary">Yangi yangilik qo'shish uchun yuqoridagi tugmani bosing</div>
        </div>
      }
    </div>
  </div>
</div>
